╔═══════════════════════════════════════════════════════════╗
║        CUSTOM DOMAIN SETUP - dreamspace.tylerstewart.co.za ║
╚═══════════════════════════════════════════════════════════╝

Date: October 20, 2025
Static Web App: swa-dreamspace-prod
Current URL: https://black-glacier-0f626db0f.3.azurestaticapps.net

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
STEP 1: ADD DNS RECORD (REQUIRED)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Go to your DNS provider and add this CNAME record:

┌─────────────────────────────────────────────────────────┐
│ Record Type:  CNAME                                     │
│ Name/Host:    dreamspace                                │
│ Value/Target: black-glacier-0f626db0f.3.azurestaticapps.net │
│ TTL:          3600 (or leave as Auto)                   │
└─────────────────────────────────────────────────────────┘

Common DNS Providers:
• Cloudflare: DNS → Records → Add Record
• GoDaddy: DNS Management → Add CNAME
• Namecheap: Advanced DNS → Add New Record
• Azure DNS: DNS Zones → tylerstewart.co.za → Record set

IMPORTANT: 
- Use "dreamspace" as the host (not the full domain)
- Point to: black-glacier-0f626db0f.3.azurestaticapps.net
- Do NOT add trailing dot or http://

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
STEP 2: VERIFY DNS PROPAGATION (5-10 minutes)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

After adding the DNS record, wait 5-10 minutes then verify:

Method 1: Command Line
  nslookup dreamspace.tylerstewart.co.za

Method 2: Online Tool
  https://dnschecker.org/#CNAME/dreamspace.tylerstewart.co.za

Expected Result: Should resolve to black-glacier-0f626db0f.3.azurestaticapps.net

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
STEP 3: ADD CUSTOM DOMAIN IN AZURE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Once DNS is propagated, run this command:

PowerShell:
  az staticwebapp hostname set `
    --name "swa-dreamspace-prod" `
    --resource-group "rg_Dreams2025Dev" `
    --hostname "dreamspace.tylerstewart.co.za"

Or via Azure Portal:
  1. Go to: Azure Portal → swa-dreamspace-prod
  2. Click: Custom domains
  3. Click: + Add
  4. Enter: dreamspace.tylerstewart.co.za
  5. Click: Next and follow wizard

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
STEP 4: SSL CERTIFICATE (AUTOMATIC)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Azure Static Web Apps automatically provisions FREE SSL certificate:
• Certificate provider: DigiCert
• Time to provision: 5-10 minutes after domain validation
• Auto-renewal: Yes, Azure handles this automatically
• Cost: FREE (included with Static Web Apps)

Your site will automatically redirect HTTP → HTTPS

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
STEP 5: UPDATE AZURE AD REDIRECT URI
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

After custom domain is configured:

1. Go to: Azure Portal → Microsoft Entra ID → App registrations
2. Find app: ebe60b7a-93c9-4b12-8375-4ab3181000e8
3. Click: Authentication
4. Add these redirect URIs:
   • https://dreamspace.tylerstewart.co.za
   • https://black-glacier-0f626db0f.3.azurestaticapps.net (keep this too)
5. Add to Front-channel logout URL:
   • https://dreamspace.tylerstewart.co.za
6. Click: Save

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
STEP 6: UPDATE CNAME FILE (IF USING GITHUB PAGES)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

I see you have a CNAME file in your repo. Update it to:

File: CNAME
Content: dreamspace.tylerstewart.co.za

Then commit and push.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
VERIFICATION CHECKLIST
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

After setup is complete:

□ DNS CNAME record added
□ DNS propagated (check with nslookup)
□ Custom domain added in Azure
□ SSL certificate provisioned (shows "Managed" status)
□ Azure AD redirect URIs updated
□ Can access: https://dreamspace.tylerstewart.co.za
□ HTTPS redirect working
□ Login works on custom domain
□ Data persists across sessions

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
TROUBLESHOOTING
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Problem: DNS not resolving
Solution: 
  • Wait longer (can take up to 24 hours)
  • Check CNAME record is correct
  • Flush DNS cache: ipconfig /flushdns

Problem: Azure says "CNAME Record is invalid"
Solution:
  • Verify DNS propagation first
  • Check CNAME points to correct Azure hostname
  • Wait 5-10 minutes and try again

Problem: SSL not working
Solution:
  • Azure provisions SSL automatically
  • Wait 10-15 minutes after domain validation
  • Certificate should appear in portal

Problem: Login fails on custom domain
Solution:
  • Add custom domain to Azure AD redirect URIs
  • Clear browser cache
  • Try incognito mode

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
TIMELINE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Step 1: Add DNS record           → 2 minutes
Step 2: DNS propagation           → 5-10 minutes (up to 24 hours)
Step 3: Add domain in Azure       → 2 minutes
Step 4: SSL certificate provision → 5-10 minutes (automatic)
Step 5: Update Azure AD           → 2 minutes
────────────────────────────────────────────────────────────
Total: ~15-30 minutes (if DNS propagates quickly)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
QUICK REFERENCE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Your URLs after setup:
• Custom Domain:  https://dreamspace.tylerstewart.co.za
• Azure Domain:   https://black-glacier-0f626db0f.3.azurestaticapps.net
• API Health:     https://dreamspace.tylerstewart.co.za/api/health

DNS Record:
• Type:   CNAME
• Name:   dreamspace
• Target: black-glacier-0f626db0f.3.azurestaticapps.net

Commands:
• Check DNS:    nslookup dreamspace.tylerstewart.co.za
• Add domain:   az staticwebapp hostname set --name swa-dreamspace-prod --resource-group rg_Dreams2025Dev --hostname dreamspace.tylerstewart.co.za
• List domains: az staticwebapp hostname list --name swa-dreamspace-prod --resource-group rg_Dreams2025Dev

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎉 Once complete, your app will be accessible at:
   https://dreamspace.tylerstewart.co.za

   With FREE SSL certificate and automatic renewal!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


