import{j as s}from"./index-a4776ee8.js";import{r as m}from"./vendor-e182443c.js";import"./auth-c67ad916.js";import"./ui-9fedfdd7.js";const a={DEBUG:0,INFO:1,WARN:2,ERROR:3,CRITICAL:4};let v=a.INFO;function w(){return new Date().toISOString()}function R(e){switch(e){case a.DEBUG:return"#6b7280";case a.INFO:return"#3b82f6";case a.WARN:return"#f59e0b";case a.ERROR:return"#ef4444";case a.CRITICAL:return"#dc2626";default:return"#000000"}}function C(e){switch(e){case a.DEBUG:return"üîç";case a.INFO:return"‚ÑπÔ∏è";case a.WARN:return"‚ö†Ô∏è";case a.ERROR:return"‚ùå";case a.CRITICAL:return"üî•";default:return"üìù"}}function I(e,r,t,o){const c=w(),d=C(e),h=R(e);return{prefix:`%c${d} [${c}] [${r}]`,style:`color: ${h}; font-weight: bold;`,message:t,data:o}}function u(e,r,t,o){if(e<v)return;const{prefix:c,style:d,message:h,data:x}=I(e,r,t,o);x&&Object.keys(x).length>0?console.log(c,d,h,x):console.log(c,d,h)}const l={debug(e,r,t){u(a.DEBUG,e,r,t)},info(e,r,t){u(a.INFO,e,r,t)},warn(e,r,t){u(a.WARN,e,r,t)},error(e,r,t){t instanceof Error&&(t={errorName:t.name,errorMessage:t.message,errorStack:t.stack}),u(a.ERROR,e,r,t)},critical(e,r,t){t instanceof Error&&(t={errorName:t.name,errorMessage:t.message,errorStack:t.stack}),u(a.CRITICAL,e,r,t)},event(e,r={}){l.info("event",e,r)},pageView(e,r,t={}){l.debug("pageview",`${e} - ${r}`,t)},metric(e,r,t={}){l.debug("metric",`${e}: ${r}`,t)},startTimer(e){const r=performance.now(),t="perf";return l.debug(t,`Started: ${e}`),()=>{const o=performance.now()-r;return l.info(t,`Completed: ${e}`,{duration:`${o.toFixed(2)}ms`}),o}}};function S(e){return{debug:(r,t)=>l.debug(e,r,t),info:(r,t)=>l.info(e,r,t),warn:(r,t)=>l.warn(e,r,t),error:(r,t)=>l.error(e,r,t),critical:(r,t)=>l.critical(e,r,t),startTimer:r=>l.startTimer(`${e}:${r}`)}}const p=S("health-check");function A(){const[e,r]=m.useState(null),[t,o]=m.useState(!0),[c,d]=m.useState(null),[h,x]=m.useState(null),[g,y]=m.useState(!0),f=async()=>{try{p.info("Fetching health status");const i=await(await fetch("/api/health",{method:"GET",headers:{Accept:"application/json"},cache:"no-cache"})).json();r(i),x(new Date),d(null),p.info("Health status fetched",{status:i.status})}catch(n){p.error("Failed to fetch health status",n),d(n.message)}finally{o(!1)}};m.useEffect(()=>{f()},[]),m.useEffect(()=>{if(!g)return;const n=setInterval(f,3e4);return()=>clearInterval(n)},[g]);const b=()=>{o(!0),f()},j=n=>{switch(n){case"healthy":return"text-green-600 bg-green-50 border-green-200";case"degraded":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"unhealthy":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},N=n=>{switch(n){case"healthy":return"‚úì";case"degraded":return"‚ö†";case"unhealthy":return"‚úó";default:return"?"}};return t&&!e?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-netsurit-red mx-auto mb-4"}),s.jsx("p",{className:"text-professional-gray-600",children:"Checking system health..."})]})}):c&&!e?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-5xl mb-4",children:"‚úó"}),s.jsx("h2",{className:"text-2xl font-bold text-professional-gray-900 mb-2",children:"Health Check Failed"}),s.jsx("p",{className:"text-professional-gray-600 mb-6",children:c}),s.jsx("button",{onClick:b,className:"px-4 py-2 bg-netsurit-red text-white rounded-lg hover:bg-red-600 transition",children:"Try Again"})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-professional-gray-900",children:"System Health Status"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-professional-gray-600",children:[s.jsx("input",{type:"checkbox",checked:g,onChange:n=>y(n.target.checked),className:"rounded border-gray-300 text-netsurit-red focus:ring-netsurit-red"}),"Auto-refresh"]}),s.jsx("button",{onClick:b,disabled:t,className:"px-4 py-2 bg-netsurit-red text-white rounded-lg hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh health status",children:t?"Refreshing...":"Refresh"})]})]}),s.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${j(e?.status)}`,children:[s.jsx("div",{className:"text-4xl font-bold",children:N(e?.status)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold capitalize",children:e?.status||"Unknown"}),s.jsxs("p",{className:"text-sm opacity-75",children:[e?.service||"DreamSpace API",e?.version&&` v${e.version}`]})]}),s.jsxs("div",{className:"text-right text-sm opacity-75",children:[s.jsx("div",{children:"Last Updated"}),s.jsx("div",{className:"font-medium",children:h?.toLocaleTimeString()})]})]})]}),e?.checks&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-professional-gray-900 mb-4",children:"Component Status"}),s.jsx("div",{className:"space-y-4",children:Object.entries(e.checks).map(([n,i])=>s.jsxs("div",{className:`p-4 rounded-lg border ${j(i.status)}`,"data-testid":`health-component-${n}`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl font-bold",children:N(i.status)}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold capitalize text-lg",children:n}),i.message&&s.jsx("p",{className:"text-sm opacity-75 mt-1",children:i.message}),i.endpoint&&s.jsx("p",{className:"text-xs opacity-60 mt-1 font-mono",children:i.endpoint})]})]}),s.jsxs("div",{className:"text-right",children:[i.responseTime!==void 0&&s.jsxs("div",{className:"text-sm font-medium",children:[i.responseTime,"ms"]}),i.status&&s.jsx("div",{className:"text-xs opacity-75 capitalize mt-1",children:i.status})]})]}),i.error&&s.jsxs("div",{className:"mt-3 p-2 bg-white bg-opacity-50 rounded text-xs font-mono",children:["Error: ",i.error]})]},n))})]}),s.jsxs("div",{className:"text-center text-sm text-professional-gray-500 mt-6",children:["Server timestamp: ",e?.timestamp&&new Date(e.timestamp).toLocaleString()]})]})})}export{A as default};
