import{j as e,u as k}from"./index-a4776ee8.js";import{r as x}from"./vendor-e182443c.js";import{Q as A,T as b,S as $,t as S,e as j,U as T,a as v,V as P,W as M,Y as L}from"./ui-9fedfdd7.js";import{P as s}from"./index-03f6f705.js";import{H as B}from"./HelpTooltip-4fed3476.js";import"./auth-c67ad916.js";function E(o,i,n){const a=x.useMemo(()=>i.reduce((t,c)=>t+c.points,0),[i]),l=x.useMemo(()=>{if(!o?.dreamBook)return{totalDreams:0,averageProgress:0,completedDreams:0,activeDreams:0};const t=o.dreamBook.length,c=t>0?Math.round(o.dreamBook.reduce((u,D)=>u+D.progress,0)/t):0,g=o.dreamBook.filter(u=>u.progress===100).length,C=o.dreamBook.filter(u=>u.progress>0&&u.progress<100).length;return{totalDreams:t,averageProgress:c,completedDreams:g,activeDreams:C}},[o?.dreamBook]),d=x.useMemo(()=>({dreamsCompleted:{count:i.filter(t=>t.type==="dreamCompleted").length,points:i.filter(t=>t.type==="dreamCompleted").reduce((t,c)=>t+c.points,0)},dreamConnects:{count:i.filter(t=>t.type==="dreamConnect").length,points:i.filter(t=>t.type==="dreamConnect").reduce((t,c)=>t+c.points,0)},groupAttendance:{count:i.filter(t=>t.type==="groupAttendance").length,points:i.filter(t=>t.type==="groupAttendance").reduce((t,c)=>t+c.points,0)},dreamProgress:{count:l.totalDreams,points:l.averageProgress}}),[i,l]),r=x.useMemo(()=>t=>t>=100?{level:"Dream Master",icon:A,color:"text-netsurit-warm-orange"}:t>=75?{level:"Dream Achiever",icon:b,color:"text-netsurit-red"}:t>=50?{level:"Dream Builder",icon:$,color:"text-netsurit-coral"}:t>=25?{level:"Dream Explorer",icon:S,color:"text-netsurit-orange"}:{level:"Dream Starter",icon:j,color:"text-professional-gray-600"},[]),m=x.useMemo(()=>r(a),[a,r]),p=x.useMemo(()=>r(a+25),[a,r]),f=x.useMemo(()=>a>=100?100:a%25/25*100,[a]),h=x.useMemo(()=>i.reduce((t,c)=>{const g=new Date(c.date).toDateString();return t[g]||(t[g]=[]),t[g].push(c),t},{}),[i]),y=x.useMemo(()=>Object.keys(h).sort((t,c)=>new Date(c)-new Date(t)),[h]);return{totalScore:a,dreamProgressStats:l,categoryStats:d,currentLevel:m,nextLevel:p,progressToNext:f,groupedHistory:h,sortedDates:y}}function N({title:o,count:i,points:n,pointsEach:a,icon:l,color:d,bgColor:r}){return e.jsxs("div",{className:"p-4 rounded-xl border border-professional-gray-200 hover:shadow-sm transition-all duration-200 hover:scale-[1.02]","data-testid":`activity-card-${o.toLowerCase().replace(/\s+/g,"-")}`,role:"article","aria-label":`${o}: ${i} activities, ${n} points`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:`p-2 ${r} rounded-lg`,"aria-hidden":"true",children:e.jsx(l,{className:`w-4 h-4 ${d}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-professional-gray-900 text-sm truncate",children:o}),e.jsxs("p",{className:"text-xs text-professional-gray-500",children:[i," ",i===1?"activity":"activities"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-professional-gray-600",children:[a," pts each"]}),e.jsx("span",{className:`text-lg font-bold ${d}`,children:n})]})]})}N.propTypes={title:s.string.isRequired,count:s.number.isRequired,points:s.number.isRequired,pointsEach:s.number.isRequired,icon:s.elementType.isRequired,color:s.string.isRequired,bgColor:s.string.isRequired};function w({title:o,totalDreams:i,averageProgress:n,icon:a,color:l,bgColor:d}){return e.jsxs("div",{className:"p-4 rounded-xl border border-professional-gray-200 hover:shadow-sm transition-all duration-200 hover:scale-[1.02]","data-testid":"progress-card",role:"article","aria-label":`${o}: ${i} dreams, ${n}% average progress`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:`p-2 ${d} rounded-lg`,"aria-hidden":"true",children:e.jsx(a,{className:`w-4 h-4 ${l}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-professional-gray-900 text-sm truncate",children:o}),e.jsxs("p",{className:"text-xs text-professional-gray-500",children:[i," ",i===1?"dream":"dreams"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-professional-gray-600",children:"Average progress"}),e.jsxs("span",{className:`text-lg font-bold ${l}`,children:[n,"%"]})]})]})}w.propTypes={title:s.string.isRequired,totalDreams:s.number.isRequired,averageProgress:s.number.isRequired,icon:s.elementType.isRequired,color:s.string.isRequired,bgColor:s.string.isRequired};function R({categoryStats:o,scoringRules:i,totalScore:n}){const a=[{key:"dreamsCompleted",label:"Dreams Completed",stats:o.dreamsCompleted,icon:j,color:"text-netsurit-red",bgColor:"bg-netsurit-light-coral/20"},{key:"dreamConnects",label:"Dream Connects",stats:o.dreamConnects,icon:T,color:"text-netsurit-coral",bgColor:"bg-netsurit-coral/20"},{key:"groupAttendance",label:"Group Attendance",stats:o.groupAttendance,icon:v,color:"text-netsurit-orange",bgColor:"bg-netsurit-warm-orange/20"},{key:"dreamProgress",label:"Dream Progress",stats:o.dreamProgress,icon:P,color:"text-netsurit-coral",bgColor:"bg-netsurit-coral/20",isProgress:!0}],l=a.reduce((r,m)=>r+m.stats.count,0),d=a.reduce((r,m)=>m.stats.count>r.stats.count?m:r);return e.jsx("div",{className:"space-y-6","data-testid":"summary-view",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-professional-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-professional-gray-900",children:"Activity Breakdown"}),e.jsx(M,{className:"w-5 h-5 text-professional-gray-500","aria-hidden":"true"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",role:"list","aria-label":"Activity categories",children:a.map(r=>r.isProgress?e.jsx(w,{title:r.label,totalDreams:r.stats.count,averageProgress:r.stats.points,icon:r.icon,color:r.color,bgColor:r.bgColor},r.key):e.jsx(N,{title:r.label,count:r.stats.count,points:r.stats.points,pointsEach:i[r.key==="dreamsCompleted"?"dreamCompleted":r.key],icon:r.icon,color:r.color,bgColor:r.bgColor},r.key))})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-professional-gray-200 p-6",role:"region","aria-label":"Quick statistics","data-testid":"quick-stats",children:[e.jsx("h3",{className:"text-lg font-semibold text-professional-gray-900 mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-professional-gray-600",children:"Total Activities"}),e.jsx("span",{className:"font-bold text-professional-gray-900",children:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-professional-gray-600",children:"Average per Activity"}),e.jsxs("span",{className:"font-bold text-professional-gray-900",children:[l>0?Math.round(n/l):0," pts"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-professional-gray-600",children:"Most Active"}),e.jsx("span",{className:"font-bold text-professional-gray-900",children:d.label.split(" ")[0]})]})]})]})})]})})}R.propTypes={categoryStats:s.shape({dreamsCompleted:s.shape({count:s.number.isRequired,points:s.number.isRequired}).isRequired,dreamConnects:s.shape({count:s.number.isRequired,points:s.number.isRequired}).isRequired,groupAttendance:s.shape({count:s.number.isRequired,points:s.number.isRequired}).isRequired,dreamProgress:s.shape({count:s.number.isRequired,points:s.number.isRequired}).isRequired}).isRequired,scoringRules:s.object.isRequired,totalScore:s.number.isRequired};function q({groupedHistory:o,sortedDates:i,totalActivities:n}){return n===0?e.jsx("div",{className:"space-y-6","data-testid":"history-view",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-professional-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8",role:"status",children:[e.jsx(b,{className:"w-12 h-12 text-professional-gray-300 mx-auto mb-4","aria-hidden":"true"}),e.jsx("p",{className:"text-professional-gray-500",children:"No activities yet. Start your dream journey!"})]})})}):e.jsx("div",{className:"space-y-6","data-testid":"history-view",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-professional-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-professional-gray-900",children:"Points History"}),e.jsxs("div",{className:"text-sm text-professional-gray-500",children:[n," ",n===1?"activity":"total activities"]})]}),e.jsx("div",{className:"space-y-6",role:"list","aria-label":"Activity history by date",children:i.map(a=>{const l=o[a],d=l.reduce((r,m)=>r+m.points,0);return e.jsxs("div",{className:"border-l-4 border-netsurit-red pl-4",role:"listitem","data-testid":`history-day-${a}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-professional-gray-900",children:new Date(a).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("span",{className:"text-sm font-bold text-netsurit-red","aria-label":`Daily total: ${d} points`,children:["+",d," pts"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",role:"list","aria-label":`Activities for ${new Date(a).toLocaleDateString()}`,children:l.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-professional-gray-50 rounded-lg hover:bg-professional-gray-100 transition-colors duration-200",role:"listitem","data-testid":`history-item-${r.id}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"font-medium text-professional-gray-900 text-sm truncate",children:r.title}),e.jsx("p",{className:"text-xs text-professional-gray-600 mt-1",children:r.category})]}),e.jsx("div",{className:"text-right ml-3",children:e.jsxs("span",{className:"text-sm font-bold text-netsurit-red","aria-label":`Earned ${r.points} points`,children:["+",r.points]})})]},r.id))})]},a)})})]})})}q.propTypes={groupedHistory:s.objectOf(s.arrayOf(s.shape({id:s.string.isRequired,title:s.string.isRequired,category:s.string.isRequired,points:s.number.isRequired,date:s.oneOfType([s.string,s.instanceOf(Date)]).isRequired}))).isRequired,sortedDates:s.arrayOf(s.string).isRequired,totalActivities:s.number.isRequired};function Y(){const{currentUser:o,scoringRules:i,scoringHistory:n}=k(),[a,l]=x.useState("summary"),{totalScore:d,categoryStats:r,currentLevel:m,nextLevel:p,progressToNext:f,groupedHistory:h,sortedDates:y}=E(o,n);return o?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6","data-testid":"scorecard-layout",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(b,{className:"h-8 w-8 text-netsurit-red","aria-hidden":"true"}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-professional-gray-900",children:"Scorecard"}),e.jsx(B,{title:"Scorecard Guide",content:"Earn points for your activities: +10 for completing dreams, +5 for Dream Connects, +3 for group attendance. Track your progress, view detailed history, and unlock achievement levels as you grow!"})]}),e.jsx("p",{className:"text-base text-professional-gray-600 font-medium",children:"Track your dream journey progress"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 lg:gap-5",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-professional-gray-200 hover:shadow-md transition-shadow text-center min-w-[100px]",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(b,{className:"h-6 w-6 text-netsurit-orange"})}),e.jsx("p",{className:"text-xs font-medium text-professional-gray-500 uppercase tracking-wide",children:"Total Points"}),e.jsx("p",{className:"text-xl font-bold text-professional-gray-900","data-testid":"total-score",children:d})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-professional-gray-200 hover:shadow-md transition-shadow text-center min-w-[100px]",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(m.icon,{className:"h-6 w-6 text-netsurit-red","aria-hidden":"true"})}),e.jsx("p",{className:"text-xs font-medium text-professional-gray-500 uppercase tracking-wide",children:"Level"}),e.jsx("p",{className:"text-xl font-bold text-professional-gray-900","data-testid":"current-level",children:m.level})]}),d<100&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-professional-gray-200 hover:shadow-md transition-shadow text-center min-w-[120px]",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(p.icon,{className:"h-6 w-6 text-netsurit-coral","aria-hidden":"true"})}),e.jsxs("p",{className:"text-xs font-medium text-professional-gray-500 uppercase tracking-wide",children:["Next: ",p.level]}),e.jsx("div",{className:"w-full bg-professional-gray-200 rounded-full h-2 mt-2",role:"progressbar","aria-valuenow":f,"aria-valuemin":"0","aria-valuemax":"100","aria-label":`Progress to ${p.level}`,children:e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]})]})]})}),e.jsxs("div",{className:"flex space-x-2 mb-6",role:"tablist","aria-label":"Scorecard views",children:[e.jsxs("button",{onClick:()=>l("summary"),role:"tab","aria-selected":a==="summary","aria-controls":"scorecard-content","data-testid":"summary-tab",className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm ${a==="summary"?"bg-netsurit-red text-white shadow-lg":"bg-white text-professional-gray-700 hover:bg-professional-gray-50 border border-professional-gray-200"}`,children:[e.jsx(L,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"}),"Overview"]}),e.jsxs("button",{onClick:()=>l("detailed"),role:"tab","aria-selected":a==="detailed","aria-controls":"scorecard-content","data-testid":"history-tab",className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm ${a==="detailed"?"bg-netsurit-red text-white shadow-lg":"bg-white text-professional-gray-700 hover:bg-professional-gray-50 border border-professional-gray-200"}`,children:[e.jsx(v,{className:"w-4 h-4 inline mr-2","aria-hidden":"true"}),"History"]})]}),e.jsx("div",{id:"scorecard-content",role:"tabpanel","aria-labelledby":a==="summary"?"summary-tab":"history-tab",children:a==="summary"?e.jsx(R,{categoryStats:r,scoringRules:i,totalScore:d}):e.jsx(q,{groupedHistory:h,sortedDates:y,totalActivities:n.length})})]}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-professional-gray-500",children:"Loading scorecard..."})})})}export{Y as default};
