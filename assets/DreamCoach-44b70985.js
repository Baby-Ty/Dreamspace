import{u as V,j as e}from"./index-a4776ee8.js";import{r as n,R as F}from"./vendor-e182443c.js";import{p as A}from"./peopleService-db37a44e.js";import{O as K,a1 as X,e as T,X as Z,t as L,k as Q,l as z,m as ee,E as W,u as se,a as G,P as ae,q as re,a2 as R,o as M,G as O,y as B,c as U,a3 as te,A as H,n as oe,g as le,B as E,z as ne,b as ie,S as ce,U as de,a4 as xe}from"./ui-9fedfdd7.js";import{H as me}from"./HelpTooltip-4fed3476.js";import"./auth-c67ad916.js";const he=({dream:a,teamMember:h,onClose:p,onAddCoachNote:u})=>{const{currentUser:b}=V(),[x,j]=n.useState("overview"),[N,v]=n.useState(""),[w,I]=n.useState("observation"),[c,y]=n.useState(!1);if(!a||!h)return null;const D=()=>{if(N.trim()){const r={id:Date.now(),dreamId:a.id,teamMemberId:h.id,coachId:b.id,coachName:b.name,note:N,type:w,createdAt:new Date().toISOString(),isCoachNote:!0};u&&u(r),v(""),y(!1)}},C=r=>({Health:"ðŸ’ª",Travel:"âœˆï¸",Career:"ðŸ’¼",Learning:"ðŸ“š",Creative:"ðŸŽ¨",Financial:"ðŸ’°",Relationships:"ðŸ‘¥",Adventure:"âš¡",Spiritual:"ðŸ™",Community:"ðŸ¤"})[r]||"ðŸŽ¯",k=()=>a.milestones?.filter(r=>r.completed).length||0,g=()=>a.milestones?.length||0,i=a.notes?.filter(r=>r.isCoachNote)||[],m=a.notes?.filter(r=>!r.isCoachNote)||[];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-4 w-11/12 max-w-5xl",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-professional-gray-200 shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral p-4 sm:p-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl emoji-white",children:C(a.category)}),e.jsxs("div",{className:"text-white min-w-0",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:a.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm text-white/80",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:h.name})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:a.category})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.progress,"% complete"]})]})]})]})]})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:p,className:"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2",children:e.jsx(Z,{className:"w-6 h-6"})})})]})}),e.jsx("div",{className:"p-4 sm:p-5",children:e.jsxs("div",{className:"bg-professional-gray-50 rounded-2xl p-4 sm:p-5 border border-professional-gray-200 shadow-inner",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsx("h3",{className:"font-bold text-professional-gray-900 text-lg",children:"Progress Overview"}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:e.jsxs("span",{className:"text-sm font-medium text-professional-gray-600 bg-white px-3 py-1 rounded-lg",children:[k(),"/",g()," milestones completed"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:a.image?e.jsx("img",{src:a.image,alt:a.title,className:"w-20 h-20 rounded-xl object-cover shadow-lg border-2 border-white"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-professional-gray-200 flex items-center justify-center shadow-lg border-2 border-white",children:e.jsx("span",{className:"text-2xl emoji-white",children:C(a.category)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-professional-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-lg font-bold text-netsurit-red",children:[a.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-professional-gray-200 rounded-full h-3 shadow-inner border border-professional-gray-300",children:e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral h-3 rounded-full transition-all duration-700 ease-out shadow-lg relative overflow-hidden",style:{width:`${a.progress}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),e.jsx("p",{className:"text-sm text-professional-gray-600 mt-3 leading-relaxed",children:a.description})]})]})]})}),e.jsx("div",{className:"border-b border-professional-gray-200 bg-professional-gray-50",children:e.jsxs("nav",{className:"flex space-x-0 overflow-x-auto",children:[e.jsx("button",{onClick:()=>j("overview"),className:`flex-1 sm:flex-none py-3 px-4 border-b-2 font-medium text-sm transition-all duration-200 ${x==="overview"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>j("milestones"),className:`flex-1 sm:flex-none py-3 px-4 border-b-2 font-medium text-sm transition-all duration-200 ${x==="milestones"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Milestones"}),e.jsx("span",{className:"sm:hidden",children:"Miles"}),e.jsxs("span",{className:"ml-1",children:["(",g(),")"]})]}),e.jsxs("button",{onClick:()=>j("notes"),className:`flex-1 sm:flex-none py-3 px-4 border-b-2 font-medium text-sm transition-all duration-200 ${x==="notes"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Member Notes"}),e.jsx("span",{className:"sm:hidden",children:"Notes"}),e.jsxs("span",{className:"ml-1",children:["(",m.length,")"]})]}),e.jsxs("button",{onClick:()=>j("coaching"),className:`flex-1 sm:flex-none py-3 px-4 border-b-2 font-medium text-sm transition-all duration-200 ${x==="coaching"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Coaching Notes"}),e.jsx("span",{className:"sm:hidden",children:"Coach"}),e.jsxs("span",{className:"ml-1",children:["(",i.length,")"]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-5 min-h-96",children:[x==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 lg:gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-professional-gray-200 shadow-xl",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-netsurit-red rounded-full"}),e.jsx("h4",{className:"font-bold text-professional-gray-900",children:"What"})]}),e.jsx("p",{className:"text-professional-gray-700 leading-relaxed",children:a.description||"This dream represents a personal goal or aspiration that the member is working towards achieving."})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-professional-gray-200 shadow-xl",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-netsurit-coral rounded-full"}),e.jsx("h4",{className:"font-bold text-professional-gray-900",children:"Why"})]}),e.jsx("p",{className:"text-professional-gray-700 leading-relaxed",children:a.motivation||`This ${a.category.toLowerCase()} goal is important for personal growth and development, contributing to overall life satisfaction and achievement.`})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-professional-gray-200 shadow-xl",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-netsurit-orange rounded-full"}),e.jsx("h4",{className:"font-bold text-professional-gray-900",children:"How"})]}),e.jsx("p",{className:"text-professional-gray-700 leading-relaxed",children:a.approach||`Through structured milestones and consistent progress tracking, this dream is being pursued with ${g()} defined steps towards completion.`})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-professional-gray-200 shadow-xl",children:[e.jsx("div",{className:"p-4 sm:p-5 border-b border-professional-gray-200 bg-professional-gray-50",children:e.jsxs("h4",{className:"font-bold text-professional-gray-900 flex items-center space-x-2",children:[e.jsx(L,{className:"h-5 w-5 text-netsurit-red"}),e.jsx("span",{children:"Progress Statistics"})]})}),e.jsx("div",{className:"p-4 sm:p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-professional-gray-600",children:"Overall Progress"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 bg-professional-gray-200 rounded-full h-3 shadow-inner border border-professional-gray-300",children:e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral h-3 rounded-full transition-all duration-700 ease-out shadow-lg",style:{width:`${a.progress}%`}})}),e.jsxs("span",{className:"font-bold text-netsurit-red",children:[a.progress,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-professional-gray-600",children:"Milestones Completed"}),e.jsxs("span",{className:"font-bold text-professional-gray-900",children:[k(),"/",g()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-professional-gray-600",children:"Member Notes"}),e.jsx("span",{className:"font-bold text-professional-gray-900",children:m.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-professional-gray-600",children:"Coaching Notes"}),e.jsx("span",{className:"font-bold text-professional-gray-900",children:i.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-professional-gray-200 shadow-xl",children:[e.jsx("div",{className:"p-4 sm:p-5 border-b border-professional-gray-200 bg-professional-gray-50",children:e.jsxs("h4",{className:"font-bold text-professional-gray-900 flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5 text-netsurit-red"}),e.jsx("span",{children:"Recent Activity"})]})}),e.jsx("div",{className:"p-4 sm:p-5",children:e.jsx("div",{className:"space-y-3",children:a.history?.slice(0,3).map(r=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-netsurit-coral rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-professional-gray-700 font-medium",children:r.action}),e.jsx("p",{className:"text-xs text-professional-gray-500",children:new Date(r.timestamp).toLocaleDateString()})]})]},r.id))||e.jsx("p",{className:"text-sm text-professional-gray-500 italic",children:"No recent activity"})})})]})]})]}),x==="milestones"&&e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-professional-gray-900",children:"Milestones"}),e.jsxs("div",{className:"text-sm text-professional-gray-600",children:[k()," of ",g()," completed"]})]}),e.jsx("div",{className:"space-y-3",children:a.milestones?.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"w-12 h-12 mx-auto mb-4 text-professional-gray-300"}),e.jsx("p",{className:"text-professional-gray-500",children:"No milestones set yet"}),e.jsx("p",{className:"text-sm mt-2 text-professional-gray-500",children:"The team member hasn't added any milestones for this dream."})]}):a.milestones?.map(r=>e.jsxs("div",{className:`flex items-center space-x-4 p-4 rounded-2xl border-2 shadow-lg transition-all duration-300 ${r.completed?"bg-professional-gray-50 border-professional-gray-300":"bg-white border-professional-gray-200 hover:border-professional-gray-300 hover:shadow-xl"}`,children:[r.completed?e.jsx(z,{className:"w-6 h-6 text-professional-gray-600 flex-shrink-0"}):e.jsx(ee,{className:"w-6 h-6 text-professional-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium ${r.completed?"text-professional-gray-700 line-through":"text-professional-gray-900"}`,children:r.text}),e.jsxs("p",{className:"text-sm text-professional-gray-500 mt-1",children:["Created ",new Date(r.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-professional-gray-400 flex-shrink-0",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"View Only"})]})]},r.id))})]}),x==="notes"&&e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-professional-gray-900",children:"Member's Personal Notes"}),e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 text-professional-gray-300"}),e.jsx("p",{className:"text-professional-gray-500",children:"No personal notes yet"}),e.jsx("p",{className:"text-sm mt-2 text-professional-gray-500",children:"The team member hasn't added any personal notes for this dream."})]}):m.map(r=>e.jsx("div",{className:"bg-white border border-professional-gray-200 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-professional-gray-600",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(r.timestamp).toLocaleDateString()," at ",new Date(r.timestamp).toLocaleTimeString()]})]})}),e.jsx("p",{className:"text-professional-gray-800 leading-relaxed whitespace-pre-wrap",children:r.text})]})},r.id))})]}),x==="coaching"&&e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-professional-gray-900",children:"Coaching Notes"}),e.jsxs("button",{onClick:()=>y(!c),className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral text-white px-4 py-2 rounded-xl hover:from-netsurit-coral hover:to-netsurit-orange focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Coaching Note"})]})]}),c&&e.jsxs("div",{className:"bg-netsurit-light-coral/10 border border-netsurit-light-coral/30 rounded-2xl p-4 sm:p-5",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-professional-gray-700 mb-2",children:"Note Type"}),e.jsxs("select",{value:w,onChange:r=>I(r.target.value),className:"w-full border border-professional-gray-300 rounded-xl px-3 py-2 focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red transition-all duration-200",children:[e.jsx("option",{value:"observation",children:"Observation"}),e.jsx("option",{value:"encouragement",children:"Encouragement"}),e.jsx("option",{value:"suggestion",children:"Suggestion"}),e.jsx("option",{value:"concern",children:"Concern"}),e.jsx("option",{value:"milestone",children:"Milestone Achievement"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-professional-gray-700 mb-2",children:"Coaching Note"}),e.jsx("textarea",{value:N,onChange:r=>v(r.target.value),placeholder:"Add your coaching observations, suggestions, or encouragement...",className:"w-full h-32 border border-professional-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red transition-all duration-200 resize-none"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:D,className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral text-white px-4 py-2 rounded-xl hover:from-netsurit-coral hover:to-netsurit-orange focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg flex items-center space-x-2",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Note"})]}),e.jsx("button",{onClick:()=>{y(!1),v("")},className:"bg-professional-gray-200 text-professional-gray-700 px-4 py-2 rounded-xl hover:bg-professional-gray-300 transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{className:"w-12 h-12 mx-auto mb-4 text-professional-gray-300"}),e.jsx("p",{className:"text-professional-gray-500",children:"No coaching notes yet"}),e.jsx("p",{className:"text-sm mt-2 text-professional-gray-500",children:"Add coaching insights and feedback to help guide the team member's progress."})]}):i.map(r=>e.jsx("div",{className:"bg-white border border-professional-gray-200 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-netsurit-red"}),e.jsx("span",{className:"text-sm font-medium text-professional-gray-800 capitalize",children:r.type?.replace("_"," ")||"Coach Note"})]}),e.jsxs("span",{className:"text-xs text-netsurit-red font-medium",children:["Coach: ",r.coachName]})]}),e.jsx("p",{className:"text-professional-gray-800 leading-relaxed mb-3",children:r.note}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-netsurit-red font-medium",children:[new Date(r.createdAt).toLocaleDateString()," at ",new Date(r.createdAt).toLocaleTimeString()]}),r.type&&e.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-medium ${r.type==="encouragement"?"bg-professional-gray-100 text-professional-gray-700":r.type==="suggestion"?"bg-netsurit-light-coral/20 text-netsurit-red":r.type==="concern"?"bg-netsurit-warm-orange/20 text-netsurit-orange":r.type==="milestone"?"bg-netsurit-coral/20 text-netsurit-coral":"bg-professional-gray-100 text-professional-gray-700"}`,children:r.type.replace("_"," ")})]})]})},r.id))})]})]})]})})})},ye=()=>{const{currentUser:a}=V(),[h,p]=n.useState(null),[u,b]=n.useState(null),[x,j]=n.useState([]),[N,v]=n.useState("all"),[w,I]=n.useState(""),[c,y]=n.useState(null),[D,C]=n.useState([]),[k,g]=n.useState([]),[i,m]=n.useState(!0),[r,S]=n.useState(null);n.useEffect(()=>{(async()=>{console.log("ðŸŽ¯ DreamCoach useEffect triggered:",{hasCurrentUser:!!a,currentUserId:a?.id,currentUserUserId:a?.userId,currentUserEmail:a?.email,currentUserName:a?.name,currentUserKeys:a?Object.keys(a):null});const o=a?.id||a?.userId;if(!o){console.log("âŒ No currentUser.id or currentUser.userId, skipping loadCoachData"),m(!1);return}try{S(null),m(!0),console.log("ðŸ”„ About to call peopleService APIs with userId:",o);const[l,t]=await Promise.all([A.getTeamMetrics(o),A.getCoachingAlerts(o)]);if(console.log("ðŸ“Š Raw API responses received:",{metricsResult:l,alertsResult:t,metricsSuccess:l?.success,alertsSuccess:t?.success}),!l?.success)throw new Error(l?.error?.message||"Failed to load team metrics");if(!t?.success)throw new Error(t?.error?.message||"Failed to load coaching alerts");const d=l.data,f=t.data;y(d),C(f||[]),g([]),console.log("âœ… Loaded coach data - Final state:",{userId:o,hasMetrics:!!d,metricsType:typeof d,metricsValue:JSON.stringify(d),alertsCount:f?.length||0,teamSize:d?.teamSize,averageScore:d?.averageScore,totalDreams:d?.totalDreams})}catch(l){console.error("âŒ Error loading coach data:",l),console.error("âŒ Error stack:",l.stack),S(l.message||"Failed to load team data")}finally{console.log("ðŸ Setting isLoading to false"),m(!1)}})()},[a?.id,a?.userId]);const $=async()=>{m(!0),await(async()=>{const o=a?.id||a?.userId;if(o)try{S(null);const[l,t]=await Promise.all([A.getTeamMetrics(o),A.getCoachingAlerts(o)]);if(!l?.success)throw new Error(l?.error?.message||"Failed to load team metrics");if(!t?.success)throw new Error(t?.error?.message||"Failed to load coaching alerts");const d=l.data,f=t.data;y(d),C(f||[]),g([]),console.log("ðŸ”„ Refreshed coach data")}catch(l){console.error("âŒ Error refreshing coach data:",l),S(l.message||"Failed to refresh team data")}finally{m(!1)}})()};if(i)return console.log("ðŸ”„ DreamCoach showing loading state"),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx(M,{className:"h-12 w-12 text-netsurit-red animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-professional-gray-900 mb-2",children:"Loading Your Team"}),e.jsx("p",{className:"text-professional-gray-600",children:"Fetching your coaching assignments and team data..."}),e.jsxs("div",{className:"mt-4 text-sm text-professional-gray-500",children:[e.jsxs("p",{children:["User ID: ",a?.id||"Not available"]}),e.jsxs("p",{children:["User UserID: ",a?.userId||"Not available"]}),e.jsxs("p",{children:["User Name: ",a?.name||"Not available"]}),e.jsxs("p",{children:["Effective ID: ",a?.id||a?.userId||"Not available"]}),e.jsx("p",{children:"Debug: Check browser console for detailed loading info"})]}),e.jsx("button",{onClick:()=>{console.log("ðŸ”„ Force refresh triggered"),window.location.reload()},className:"mt-4 px-4 py-2 bg-netsurit-red text-white rounded hover:bg-netsurit-coral",children:"Force Reload Page"})]})});if(r)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx(O,{className:"h-12 w-12 text-netsurit-red mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-professional-gray-900 mb-2",children:"Failed to Load Team Data"}),e.jsx("p",{className:"text-professional-gray-600 mb-4",children:r}),e.jsxs("button",{onClick:$,disabled:i,className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral text-white px-4 py-2 rounded-lg hover:from-netsurit-coral hover:to-netsurit-orange focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg flex items-center mx-auto",children:[i?e.jsx(M,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(B,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:i?"Retrying...":"Retry"})]})]})});if(!c)return console.log('âŒ DreamCoach showing "No Team Assigned" state:',{teamMetrics:c,teamMetricsType:typeof c,hasCurrentUser:!!a,currentUserId:a?.id,isLoading:i,error:r}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Team Assigned"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any team members assigned to coach yet."}),e.jsxs("button",{onClick:$,disabled:i,className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral text-white px-4 py-2 rounded-lg hover:from-netsurit-coral hover:to-netsurit-orange focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg flex items-center mx-auto",children:[i?e.jsx(M,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(B,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:i?"Checking...":"Check Again"})]})]})});const P=s=>({Health:ne,Travel:T,Career:ie,Learning:E,Creative:ce,Financial:L,Relationships:de,Adventure:xe,Spiritual:H,Community:U})[s]||T,Y=c.teamMembers.filter(s=>{if(!s.name.toLowerCase().includes(w.toLowerCase()))return!1;switch(N){case"excelling":return s.score>=60;case"on-track":return s.score>=30&&s.score<60;case"needs-attention":return s.score<30;default:return!0}}),_=s=>{j(o=>[...o,s])},q=(s,o)=>{const l={...s,notes:[...s.notes||[],...x.filter(t=>t.dreamId===s.id)]};b(l),p(o)},J=({member:s,onClose:o})=>{if(!s)return null;const l=k.filter(t=>t.teamMemberId===s.id);return e.jsx("div",{className:"fixed inset-0 bg-professional-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-6 border border-professional-gray-200 w-11/12 max-w-4xl shadow-lg rounded-xl bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.name)}&background=6366f1&color=fff&size=100`,alt:s.name,className:"h-16 w-16 rounded-full object-cover ring-2 ring-netsurit-light-coral/30",onError:t=>{t.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(s.name)}&background=6366f1&color=fff&size=100`}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-professional-gray-900",children:s.name}),e.jsxs("p",{className:"text-professional-gray-600",children:[s.office," â€¢ ",s.score," points"]})]})]}),e.jsx("button",{onClick:o,className:"text-professional-gray-400 hover:text-netsurit-red transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-professional-gray-900 mb-4",children:"Dreams Portfolio"}),e.jsx("div",{className:"space-y-4",children:(s.dreamBook||s.sampleDreams||[]).length>0?(s.dreamBook||s.sampleDreams||[])?.slice(0,3).map((t,d)=>e.jsx("div",{className:"bg-professional-gray-50 rounded-lg p-4 hover:bg-netsurit-light-coral/10 cursor-pointer transition-colors border border-transparent hover:border-netsurit-light-coral/40 hover:shadow-sm",onClick:()=>q(t,s),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"h-16 w-16 rounded-lg flex-shrink-0 ring-1 ring-professional-gray-200 overflow-hidden bg-professional-gray-100",children:[t.image?e.jsx("img",{src:t.image,alt:t.title,className:"h-full w-full object-cover",onError:f=>{f.target.style.display="none",f.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`h-full w-full flex items-center justify-center ${t.image?"hidden":"flex"}`,children:F.createElement(P(t.category),{className:"h-8 w-8 text-professional-gray-400"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[F.createElement(P(t.category),{className:"h-4 w-4 text-netsurit-red"}),e.jsx("h4",{className:"font-medium text-professional-gray-900",children:t.title})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-netsurit-red",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"View Details"})]})]}),e.jsx("p",{className:"text-sm text-professional-gray-600 mb-2",children:t.category}),t.description&&e.jsx("p",{className:"text-xs text-professional-gray-500 mb-2 line-clamp-2",children:t.description}),e.jsx("div",{className:"w-full bg-professional-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral h-2 rounded-full transition-all duration-300",style:{width:`${t.progress||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("p",{className:"text-xs text-professional-gray-500",children:[t.progress||0,"% complete"]}),e.jsx("p",{className:"text-xs text-netsurit-red font-medium",children:"Click to coach"})]})]})]})},t.id||d)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"h-12 w-12 text-professional-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-professional-gray-500 font-medium",children:"No Dreams Yet"}),e.jsxs("p",{className:"text-sm text-professional-gray-400 mt-1",children:[s.name," hasn't created any dreams to work on."]}),e.jsx("p",{className:"text-xs text-professional-gray-400 mt-2",children:"Encourage them to set some professional or personal goals!"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-professional-gray-900 mb-4",children:"Coaching Notes"}),e.jsx("div",{className:"space-y-3 mb-6",children:l.slice(0,3).map(t=>e.jsxs("div",{className:"bg-professional-gray-50 rounded-lg p-3 border border-professional-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="recognition"?"bg-netsurit-coral":t.type==="intervention"?"bg-netsurit-orange":"bg-netsurit-red"}`}),e.jsx("span",{className:"text-xs font-medium text-professional-gray-600 uppercase",children:t.type.replace("_"," ")})]}),e.jsx("p",{className:"text-sm text-professional-gray-700 mb-2",children:t.note}),e.jsx("p",{className:"text-xs text-professional-gray-500",children:new Date(t.createdAt).toLocaleDateString()})]},t.id))}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full bg-gradient-to-r from-netsurit-red to-netsurit-coral text-white px-4 py-2 rounded-lg hover:from-netsurit-coral hover:to-netsurit-orange transition-all duration-200 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Coaching Note"})]}),e.jsxs("button",{className:"w-full bg-gradient-to-r from-professional-gray-600 to-professional-gray-700 text-white px-4 py-2 rounded-lg hover:from-professional-gray-700 hover:to-professional-gray-800 transition-all duration-200 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule Check-in"})]})]})]})]})]})})};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[e.jsxs("div",{className:"mb-6 lg:mb-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(te,{className:"h-8 w-8 text-netsurit-red"}),e.jsx("h1",{className:"text-3xl font-bold text-professional-gray-900",children:"Dream Coach Dashboard"}),e.jsx(me,{title:"Dream Coach Guide",content:"Guide your team's growth journey. View team member profiles, track their dreams and progress, provide coaching support, monitor alerts for team members needing attention, and celebrate achievements together."})]}),e.jsx("p",{className:"text-professional-gray-600",children:"Support and guide your team's personal and professional growth journey"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-professional-gray-200 hover:shadow-md transition-shadow text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(U,{className:"h-6 w-6 text-netsurit-red"})}),e.jsx("p",{className:"text-xs font-medium text-professional-gray-500 uppercase tracking-wide",children:"Team Size"}),e.jsx("p",{className:"text-xl font-bold text-professional-gray-900",children:c.teamSize})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-professional-gray-200 hover:shadow-md transition-shadow text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(L,{className:"h-6 w-6 text-netsurit-coral"})}),e.jsx("p",{className:"text-xs font-medium text-professional-gray-500 uppercase tracking-wide",children:"Avg Score"}),e.jsx("p",{className:"text-xl font-bold text-professional-gray-900",children:c.averageScore})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-professional-gray-200 hover:shadow-md transition-shadow text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(T,{className:"h-6 w-6 text-netsurit-orange"})}),e.jsx("p",{className:"text-xs font-medium text-professional-gray-500 uppercase tracking-wide",children:"Total Dreams"}),e.jsx("p",{className:"text-xl font-bold text-professional-gray-900",children:c.totalDreams})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border border-professional-gray-200 hover:shadow-md transition-shadow text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(H,{className:"h-6 w-6 text-netsurit-warm-orange"})}),e.jsx("p",{className:"text-xs font-medium text-professional-gray-500 uppercase tracking-wide",children:"Engagement"}),e.jsxs("p",{className:"text-xl font-bold text-professional-gray-900",children:[c.engagementRate,"%"]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-8 border border-professional-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-professional-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-professional-gray-900",children:"Team Members"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"h-4 w-4 text-professional-gray-400 absolute left-3 top-3"}),e.jsx("input",{type:"text",placeholder:"Search members...",value:w,onChange:s=>I(s.target.value),className:"pl-10 pr-4 py-2 border border-professional-gray-300 rounded-lg focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red"})]}),e.jsxs("select",{value:N,onChange:s=>v(s.target.value),className:"border border-professional-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red",children:[e.jsx("option",{value:"all",children:"All Members"}),e.jsx("option",{value:"excelling",children:"Excelling"}),e.jsx("option",{value:"on-track",children:"On Track"}),e.jsx("option",{value:"needs-attention",children:"Needs Attention"})]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Y.map(s=>e.jsxs("div",{className:"bg-professional-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer border border-professional-gray-200 hover:border-netsurit-light-coral/40 hover:bg-netsurit-light-coral/5",onClick:()=>p(s),children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("img",{src:s.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.name)}&background=6366f1&color=fff&size=100`,alt:s.name,className:"h-10 w-10 rounded-full object-cover ring-2 ring-professional-gray-200",onError:o=>{o.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(s.name)}&background=6366f1&color=fff&size=100`}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-professional-gray-900 text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-professional-gray-600 truncate",children:s.office})]}),e.jsx(le,{className:"h-4 w-4 text-netsurit-red"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-professional-gray-600",children:"Overall Score"}),e.jsx("span",{className:"font-semibold text-professional-gray-900 text-sm",children:s.score})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-professional-gray-600",children:"Dreams"}),e.jsx("span",{className:"font-semibold text-professional-gray-900 text-sm",children:s.dreamsCount||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-professional-gray-600",children:"Connects"}),e.jsx("span",{className:"font-semibold text-professional-gray-900 text-sm",children:s.connectsCount||0})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:o=>{o.stopPropagation(),p(s)},className:"flex-1 inline-flex items-center justify-center px-3 py-2 bg-gradient-to-r from-netsurit-red to-netsurit-coral text-white rounded-lg hover:from-netsurit-coral hover:to-netsurit-orange focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 font-semibold text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1.5"}),e.jsx("span",{children:"View Dreams"})]}),e.jsx("button",{onClick:o=>{o.stopPropagation()},className:"px-3 py-2 bg-gradient-to-r from-professional-gray-600 to-professional-gray-700 text-white rounded-lg hover:from-professional-gray-700 hover:to-professional-gray-800 focus:outline-none focus:ring-2 focus:ring-professional-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg font-medium text-xs",children:"Check-In"})]})]},s.id))})})]}),D.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow mb-8 border border-professional-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-professional-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-5 w-5 text-netsurit-orange"}),e.jsx("h2",{className:"text-lg font-semibold text-professional-gray-900",children:"Coaching Alerts"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:D.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-professional-gray-50 rounded-lg border border-professional-gray-100",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full mt-2 ${s.priority==="high"?"bg-netsurit-red":s.priority==="medium"?"bg-netsurit-orange":"bg-netsurit-coral"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-professional-gray-900",children:s.message}),e.jsx("p",{className:"text-sm text-professional-gray-600 mt-1",children:s.actionSuggestion})]}),e.jsx("button",{className:"px-3 py-1.5 bg-gradient-to-r from-professional-gray-600 to-professional-gray-700 text-white rounded-lg hover:from-professional-gray-700 hover:to-professional-gray-800 text-xs font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:"Take Action"})]},s.id))})})]}),h&&!u&&e.jsx(J,{member:h,onClose:()=>p(null)}),u&&h&&e.jsx(he,{dream:u,teamMember:h,onClose:()=>{b(null),p(null)},onAddCoachNote:_})]})};export{ye as default};
