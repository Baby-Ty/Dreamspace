import{j as e,d as le,u as oe}from"./index-a4776ee8.js";import{r as h}from"./vendor-e182443c.js";import{P as i}from"./index-03f6f705.js";import{l as A,a0 as de,a as F,m as U,e as I,P as L,w as ce,g as xe,T as me,a1 as pe,q as he,X as q,t as Y,k as E,R as ge,u as V,a2 as z}from"./ui-9fedfdd7.js";function B({milestone:r,linkedGoals:a=[],onToggleMilestone:n,onAddGoalToMilestone:m,onEditGoal:d,dreamProgress:u=0}){const[f,j]=h.useState(!1);if(!r)return null;const c=a.length>0,p=r.coachManaged||!1,t=r.type==="consistency",N=(()=>{if(!t||!r.targetWeeks)return 0;const l=r.streakWeeks||0;return Math.min(Math.round(l/r.targetWeeks*100),100)})();return e.jsxs("div",{className:`rounded-2xl border-2 shadow-lg transition-all duration-300 ${r.completed?"bg-professional-gray-50 border-professional-gray-300":"bg-white border-professional-gray-200 hover:border-professional-gray-300 hover:shadow-xl"}`,"data-testid":`milestone-${r.id}`,children:[e.jsxs("div",{className:"flex items-start space-x-4 p-4",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),n(r.id)},className:"flex-shrink-0 mt-1","aria-label":r.completed?"Mark milestone incomplete":"Mark milestone complete","data-testid":`milestone-toggle-${r.id}`,children:r.completed?e.jsx(A,{className:"w-6 h-6 text-professional-gray-600","aria-hidden":"true"}):e.jsx(U,{className:"w-6 h-6 text-professional-gray-400 hover:text-professional-gray-600 transition-colors duration-200","aria-hidden":"true"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium ${r.completed?"text-professional-gray-700 line-through":"text-professional-gray-900"}`,children:r.text}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2 mt-1",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs bg-netsurit-light-coral text-netsurit-red px-2 py-1 rounded-full font-medium",children:"Coach Milestone"}),t&&e.jsxs("span",{className:"text-xs bg-netsurit-warm-orange/20 text-netsurit-orange px-2 py-1 rounded-full font-medium",children:[r.streakWeeks||0,"/",r.targetWeeks," weeks"]})]}),c&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium flex items-center space-x-1",children:[e.jsx(I,{className:"w-3 h-3","aria-hidden":"true"}),e.jsxs("span",{children:[a.length," goal",a.length!==1?"s":""]})]}),!c&&e.jsx("span",{className:"text-xs bg-professional-gray-100 text-professional-gray-600 px-2 py-1 rounded-full font-medium",children:"No goals yet"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!c&&m&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),m(r)},className:"text-xs bg-professional-gray-500 text-white px-3 py-1.5 rounded-lg hover:bg-professional-gray-600 transition-colors flex items-center space-x-1 shadow-sm","aria-label":"Add goal to milestone",children:[e.jsx(L,{className:"w-3 h-3","aria-hidden":"true"}),e.jsx("span",{children:"Add Goal"})]}),c&&e.jsx("button",{onClick:()=>j(!f),className:"flex-shrink-0 p-2 hover:bg-professional-gray-100 rounded-lg transition-colors","aria-expanded":f,"aria-label":f?"Collapse goals":"Expand goals","data-testid":`milestone-expand-${r.id}`,children:f?e.jsx(ce,{className:"w-5 h-5 text-professional-gray-600","aria-hidden":"true"}):e.jsx(xe,{className:"w-5 h-5 text-professional-gray-600","aria-hidden":"true"})})]})]}),t&&r.targetWeeks&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-professional-gray-600 mb-1",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(me,{className:"w-3 h-3","aria-hidden":"true"}),e.jsx("span",{children:"Streak Progress"})]}),e.jsxs("span",{className:"font-medium",children:[N,"%"]})]}),e.jsx("div",{className:"w-full bg-professional-gray-200 rounded-full h-2",role:"progressbar","aria-valuenow":N,"aria-valuemin":"0","aria-valuemax":"100","aria-label":"Milestone progress",children:e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral h-2 rounded-full transition-all duration-500",style:{width:`${N}%`}})})]})]})]}),f&&e.jsxs("div",{className:"border-t border-professional-gray-200 p-4 bg-professional-gray-50",role:"region","aria-label":"Linked goals and weekly history",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-professional-gray-700 flex items-center space-x-2",children:[e.jsx(I,{className:"w-4 h-4","aria-hidden":"true"}),e.jsxs("span",{children:["Recurring Goals (",a.length,")"]})]}),m&&e.jsxs("button",{onClick:()=>m(r),className:"text-xs bg-professional-gray-500 text-white px-3 py-1.5 rounded-lg hover:bg-professional-gray-600 transition-colors flex items-center space-x-1","aria-label":"Add goal to milestone",children:[e.jsx(L,{className:"w-3 h-3","aria-hidden":"true"}),e.jsx("span",{children:"Add Goal"})]})]}),c?e.jsx("div",{className:"space-y-3",children:a.map(l=>e.jsx(K,{goal:l,milestoneStartDate:r.startDate,onEditGoal:d},l.id))}):e.jsxs("div",{className:"text-center py-6 text-professional-gray-500 bg-white rounded-lg border border-dashed border-professional-gray-300",children:[e.jsx(I,{className:"w-8 h-8 mx-auto mb-2 text-professional-gray-300","aria-hidden":"true"}),e.jsx("p",{className:"text-sm",children:"No goals linked to this milestone yet"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add Goal" to create a recurring goal'})]})]})]})}const K=h.memo(function({goal:a,milestoneStartDate:n,onEditGoal:m}){const[d,u]=h.useState(!1),f=a.weekLog||{},j=Object.keys(f).sort().reverse(),c=j.filter(p=>f[p]===!0).length;return e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-professional-gray-200","data-testid":`linked-goal-${a.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-professional-gray-900 text-sm",children:a.title}),a.description&&e.jsx("p",{className:"text-xs text-professional-gray-600 mt-1",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2 text-xs text-professional-gray-600",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(A,{className:"w-3 h-3","aria-hidden":"true"}),e.jsxs("span",{children:[c," weeks completed"]})]}),a.recurrence&&e.jsx("span",{className:"bg-professional-gray-100 px-2 py-0.5 rounded",children:a.recurrence==="weekly"?"Weekly":"Once"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[m&&e.jsx("button",{onClick:()=>m(a),className:"flex-shrink-0 p-1.5 hover:bg-professional-gray-100 rounded transition-colors","aria-label":"Edit goal",title:"Edit goal",children:e.jsx(de,{className:"w-3.5 h-3.5 text-professional-gray-600","aria-hidden":"true"})}),j.length>0&&e.jsx("button",{onClick:()=>u(!d),className:"flex-shrink-0 text-xs text-professional-gray-600 hover:text-professional-gray-800 font-medium","aria-expanded":d,"aria-label":d?"Hide weekly history":"Show weekly history","data-testid":`toggle-weeklog-${a.id}`,children:d?"Hide History":"View History"})]})]}),d&&j.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-professional-gray-200",children:[e.jsxs("h5",{className:"text-xs font-semibold text-professional-gray-700 mb-2 flex items-center space-x-1",children:[e.jsx(F,{className:"w-3 h-3","aria-hidden":"true"}),e.jsx("span",{children:"Weekly History"})]}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",role:"list","aria-label":"Weekly completion history",children:j.map(p=>e.jsxs("div",{className:"flex items-center justify-between text-xs py-1",role:"listitem",children:[e.jsx("span",{className:"text-professional-gray-600",children:le(p)}),f[p]?e.jsx(A,{className:"w-4 h-4 text-green-600","aria-label":"Completed"}):e.jsx(U,{className:"w-4 h-4 text-professional-gray-400","aria-label":"Not completed"})]},p))})]})]})});K.propTypes={goal:i.shape({id:i.oneOfType([i.string,i.number]).isRequired,title:i.string.isRequired,description:i.string,recurrence:i.oneOf(["weekly","once"]),weekLog:i.object}).isRequired,milestoneStartDate:i.string,onEditGoal:i.func};B.propTypes={milestone:i.shape({id:i.oneOfType([i.string,i.number]).isRequired,text:i.string.isRequired,completed:i.bool,coachManaged:i.bool,type:i.oneOf(["consistency","deadline","general"]),targetWeeks:i.number,startDate:i.string,streakWeeks:i.number}).isRequired,linkedGoals:i.array,onToggleMilestone:i.func.isRequired,onAddGoalToMilestone:i.func,onEditGoal:i.func,dreamProgress:i.number};const ue=h.memo(B),Ce=({dream:r,onClose:a,onUpdate:n})=>{const{updateDreamProgress:m,currentUser:d,weeklyGoals:u,addWeeklyGoal:f,updateWeeklyGoal:j}=oe(),[c,p]=h.useState("overview"),[t,g]=h.useState({...r,milestones:r.milestones||[],notes:r.notes||[],history:r.history||[]}),[N,l]=h.useState(""),[k,O]=h.useState(""),[_,C]=h.useState(!1);h.useState(!1);const[X,S]=h.useState(!1),[T,D]=h.useState(null),[G,M]=h.useState(null),[x,v]=h.useState({title:"",description:"",milestoneId:null,recurrence:"once",weekLog:{}});h.useEffect(()=>{g({...r,milestones:r.milestones||[],notes:r.notes||[],history:r.history||[]})},[r]);const J=s=>{const o={...t,progress:s};g(o),C(!0);const y={id:Date.now(),type:"progress",action:`Progress updated to ${s}%`,timestamp:new Date().toISOString(),oldValue:t.progress,newValue:s};o.history=[y,...o.history],g(o),m(r.id,s)},Q=()=>{const o=t.progress===100?90:100;J(o)},Z=()=>{if(N.trim()){const s={id:Date.now(),text:N.trim(),completed:!1,createdAt:new Date().toISOString()},o={...t,milestones:[...t.milestones,s]};g(o),l(""),C(!0);const y={id:Date.now(),type:"milestone",action:`Added milestone: "${s.text}"`,timestamp:new Date().toISOString()};o.history=[y,...o.history],g(o)}},ee=s=>{const o=t.milestones.map(b=>b.id===s?{...b,completed:!b.completed}:b),y=t.milestones.find(b=>b.id===s),w={...t,milestones:o};g(w),C(!0);const W={id:Date.now(),type:"milestone",action:`${y.completed?"Uncompleted":"Completed"} milestone: "${y.text}"`,timestamp:new Date().toISOString()};w.history=[W,...w.history],g(w)},se=s=>{const o=t.milestones.find(b=>b.id===s),y=t.milestones.filter(b=>b.id!==s),w={...t,milestones:y};g(w),C(!0);const W={id:Date.now(),type:"milestone",action:`Deleted milestone: "${o.text}"`,timestamp:new Date().toISOString()};w.history=[W,...w.history],g(w)},te=()=>{if(k.trim()){const s={id:Date.now(),text:k.trim(),timestamp:new Date().toISOString()},o={...t,notes:[s,...t.notes]};g(o),O(""),C(!0);const y={id:Date.now(),type:"note",action:"Added new note",timestamp:new Date().toISOString()};o.history=[y,...o.history],g(o)}},re=s=>{D(s),M(null),v({title:"",description:"",milestoneId:s.id,recurrence:"once",weekLog:{}}),S(!0)},ae=s=>{M(s);const o=t.milestones.find(y=>y.id===s.milestoneId);D(o),v({title:s.title,description:s.description||"",milestoneId:s.milestoneId,recurrence:s.recurrence||"weekly",weekLog:s.weekLog||{}}),S(!0)},ie=()=>{if(x.title.trim()){if(G){const s={...G,title:x.title.trim(),description:x.description.trim(),recurrence:x.recurrence};j(s)}else{const s={id:Date.now(),title:x.title.trim(),description:x.description.trim(),completed:!1,dreamId:t.id,dreamTitle:t.title,dreamCategory:t.category,milestoneId:x.milestoneId,recurrence:x.recurrence,active:!0,createdAt:new Date().toISOString()};s.recurrence==="weekly"&&(s.weekLog={}),f(s)}v({title:"",description:"",milestoneId:null,recurrence:"once",weekLog:{}}),S(!1),D(null),M(null)}},ne=()=>{n(t),C(!1)},P=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=s=>({Health:"ðŸ’ª",Travel:"âœˆï¸",Career:"ðŸ’¼",Learning:"ðŸ“š",Creative:"ðŸŽ¨",Financial:"ðŸ’°",Relationships:"ðŸ‘¥",Adventure:"âš¡",Spiritual:"ðŸ™",Community:"ðŸ¤"})[s]||"ðŸŽ¯",H=()=>t.milestones?.filter(s=>s.completed).length||0,$=()=>t.milestones?.length||0;return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:[e.jsx("div",{className:"w-full max-w-5xl max-h-[90vh] flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-professional-gray-200 shadow-2xl flex flex-col max-h-full overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral p-3 sm:p-4 rounded-t-2xl flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[e.jsx("span",{className:"text-xl sm:text-2xl emoji-white flex-shrink-0",children:R(t.category)}),e.jsxs("div",{className:"text-white min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 text-xs sm:text-sm text-white/80",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(pe,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:t.category})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(I,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{children:[t.progress,"%"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[_&&e.jsxs("button",{onClick:ne,className:"bg-white bg-opacity-20 text-white px-3 py-1.5 rounded-lg hover:bg-opacity-30 transition-all duration-200 flex items-center space-x-1.5 text-sm font-medium",children:[e.jsx(he,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),e.jsx("button",{onClick:a,className:"p-1.5 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white",children:e.jsx(q,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"p-3 sm:p-4 border-b border-professional-gray-200 bg-professional-gray-50 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.image&&e.jsx("img",{src:t.image,alt:t.title,className:"w-16 h-16 rounded-lg object-cover shadow-md border border-white flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-professional-gray-600",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm font-bold text-netsurit-red",children:[t.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-professional-gray-200 rounded-full h-2 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral h-2 rounded-full transition-all duration-700 ease-out",style:{width:`${t.progress}%`}})}),e.jsx("p",{className:"text-xs text-professional-gray-600 mt-2 line-clamp-1",children:t.description})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-xs font-medium text-professional-gray-600 bg-white px-2 py-1 rounded-md whitespace-nowrap",children:[H(),"/",$()," milestones"]}),e.jsx("button",{onClick:Q,className:"bg-professional-gray-500 text-white px-3 py-1.5 rounded-lg hover:bg-professional-gray-600 focus:outline-none focus:ring-2 focus:ring-professional-gray-400 transition-all duration-200 text-xs font-medium shadow-md whitespace-nowrap",children:t.progress===100?"Mark Incomplete":"Mark Complete"})]})]})}),e.jsx("div",{className:"border-b border-professional-gray-200 bg-professional-gray-50 flex-shrink-0",children:e.jsxs("nav",{className:"flex space-x-0 overflow-x-auto",children:[e.jsx("button",{onClick:()=>p("overview"),className:`flex-1 sm:flex-none py-2 px-3 border-b-2 font-medium text-xs sm:text-sm transition-all duration-200 ${c==="overview"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>p("milestones"),className:`flex-1 sm:flex-none py-2 px-3 border-b-2 font-medium text-xs sm:text-sm transition-all duration-200 ${c==="milestones"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Milestones"}),e.jsx("span",{className:"sm:hidden",children:"Miles"}),e.jsxs("span",{className:"ml-1",children:["(",$(),")"]})]}),e.jsxs("button",{onClick:()=>p("notes"),className:`flex-1 sm:flex-none py-2 px-3 border-b-2 font-medium text-xs sm:text-sm transition-all duration-200 ${c==="notes"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Personal Notes"}),e.jsx("span",{className:"sm:hidden",children:"Notes"}),e.jsxs("span",{className:"ml-1",children:["(",t.notes?.filter(s=>!s.isCoachNote).length||0,")"]})]}),e.jsxs("button",{onClick:()=>p("coach-notes"),className:`flex-1 sm:flex-none py-2 px-3 border-b-2 font-medium text-xs sm:text-sm transition-all duration-200 ${c==="coach-notes"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Coach Notes"}),e.jsx("span",{className:"sm:hidden",children:"Coach"}),e.jsxs("span",{className:"ml-1",children:["(",t.notes?.filter(s=>s.isCoachNote).length||0,")"]})]}),e.jsxs("button",{onClick:()=>p("history"),className:`flex-1 sm:flex-none py-2 px-3 border-b-2 font-medium text-xs sm:text-sm transition-all duration-200 ${c==="history"?"border-netsurit-red text-netsurit-red bg-white":"border-transparent text-professional-gray-600 hover:text-professional-gray-900 hover:bg-professional-gray-100"}`,children:["History (",t.history?.length||0,")"]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[c==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-white rounded-xl border border-professional-gray-200 shadow-md",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-netsurit-red rounded-full"}),e.jsx("h4",{className:"font-bold text-professional-gray-900 text-sm",children:"What"})]}),e.jsx("p",{className:"text-professional-gray-700 leading-relaxed text-sm",children:t.description||"This dream represents a personal goal or aspiration that you're working towards achieving."})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-professional-gray-200 shadow-md",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-netsurit-coral rounded-full"}),e.jsx("h4",{className:"font-bold text-professional-gray-900 text-sm",children:"Why"})]}),e.jsx("p",{className:"text-professional-gray-700 leading-relaxed text-sm",children:t.motivation||`This ${t.category.toLowerCase()} goal is important for your personal growth and development, contributing to overall life satisfaction and achievement.`})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-professional-gray-200 shadow-md",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-netsurit-orange rounded-full"}),e.jsx("h4",{className:"font-bold text-professional-gray-900 text-sm",children:"How"})]}),e.jsx("p",{className:"text-professional-gray-700 leading-relaxed text-sm",children:t.approach||`Through structured milestones and consistent progress tracking, you're pursuing this dream with ${$()} defined steps towards completion.`})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-professional-gray-200 shadow-md",children:[e.jsx("div",{className:"p-2 px-3 border-b border-professional-gray-200 bg-professional-gray-50",children:e.jsxs("h4",{className:"font-bold text-professional-gray-900 flex items-center space-x-2 text-sm",children:[e.jsx(Y,{className:"h-4 w-4 text-netsurit-red"}),e.jsx("span",{children:"Progress Statistics"})]})}),e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-medium text-professional-gray-600",children:"Overall Progress"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-12 bg-professional-gray-200 rounded-full h-2 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral h-2 rounded-full transition-all duration-700 ease-out",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"font-bold text-netsurit-red text-xs",children:[t.progress,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-professional-gray-600",children:"Milestones Completed"}),e.jsxs("span",{className:"font-bold text-professional-gray-900 text-xs",children:[H(),"/",$()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-professional-gray-600",children:"Personal Notes"}),e.jsx("span",{className:"font-bold text-professional-gray-900 text-xs",children:t.notes?.length||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-professional-gray-600",children:"Activity History"}),e.jsx("span",{className:"font-bold text-professional-gray-900 text-xs",children:t.history?.length||0})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-professional-gray-200 shadow-md",children:[e.jsx("div",{className:"p-2 px-3 border-b border-professional-gray-200 bg-professional-gray-50",children:e.jsxs("h4",{className:"font-bold text-professional-gray-900 flex items-center space-x-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-netsurit-red"}),e.jsx("span",{children:"Recent Activity"})]})}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"space-y-2",children:t.history?.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-netsurit-coral rounded-full mt-1.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-professional-gray-700 font-medium",children:s.action}),e.jsx("p",{className:"text-xs text-professional-gray-500",children:new Date(s.timestamp).toLocaleDateString()})]})]},s.id))||e.jsx("p",{className:"text-xs text-professional-gray-500 italic",children:"No recent activity"})})})]})]})]}),c==="milestones"&&e.jsx(fe,{milestones:t.milestones,newMilestone:N,setNewMilestone:l,onAddMilestone:Z,onToggleMilestone:ee,onDeleteMilestone:se,onAddGoalToMilestone:re,onEditGoal:ae,dreamId:t.id,dreamProgress:t.progress,weeklyGoals:u}),c==="notes"&&e.jsx(ye,{notes:t.notes?.filter(s=>!s.isCoachNote)||[],newNote:k,setNewNote:O,onAddNote:te,formatDate:P}),c==="coach-notes"&&e.jsx(je,{coachNotes:t.notes?.filter(s=>s.isCoachNote)||[],formatDate:P}),c==="history"&&e.jsx(be,{history:t.history||[],formatDate:P})]})]})}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[e.jsx("div",{className:"p-4 sm:p-5 border-b border-professional-gray-200 bg-professional-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:R(t.category)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-professional-gray-900",children:G?"Edit Goal":"Add Goal"}),e.jsx("p",{className:"text-sm text-professional-gray-600",children:T?.text})]})]}),e.jsx("button",{onClick:()=>{S(!1),D(null),M(null)},className:"p-2 text-professional-gray-400 hover:text-professional-gray-600 hover:bg-professional-gray-100 rounded-lg",children:e.jsx(q,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-4 sm:p-5",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),ie()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-professional-gray-700 mb-2",children:"Goal Title *"}),e.jsx("input",{type:"text",value:x.title,onChange:s=>v({...x,title:s.target.value}),placeholder:"What do you want to accomplish?",className:"w-full px-4 py-2 border border-professional-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red transition-all duration-200",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-professional-gray-700 mb-2",children:"Description (optional)"}),e.jsx("textarea",{value:x.description,onChange:s=>v({...x,description:s.target.value}),placeholder:"Add more details about your goal...",className:"w-full px-4 py-2 border border-professional-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red transition-all duration-200 h-20 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-professional-gray-700 mb-2",children:"Goal Type"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>v({...x,recurrence:"once"}),className:`flex-1 px-4 py-3 rounded-xl border-2 transition-all duration-200 ${x.recurrence==="once"?"border-netsurit-red bg-netsurit-red/5 text-netsurit-red font-medium":"border-professional-gray-300 text-professional-gray-600 hover:border-professional-gray-400"}`,children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-semibold",children:"One-time Goal"}),e.jsx("div",{className:"text-xs mt-1",children:"Complete once"})]})}),e.jsx("button",{type:"button",onClick:()=>v({...x,recurrence:"weekly"}),className:`flex-1 px-4 py-3 rounded-xl border-2 transition-all duration-200 ${x.recurrence==="weekly"?"border-netsurit-red bg-netsurit-red/5 text-netsurit-red font-medium":"border-professional-gray-300 text-professional-gray-600 hover:border-professional-gray-400"}`,children:e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"text-sm font-semibold flex items-center space-x-1.5",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Recurring Weekly"})]}),e.jsx("div",{className:"text-xs mt-1",children:"Track each week"})]})})]})]}),x.recurrence==="weekly"&&e.jsx("div",{className:"flex items-start space-x-3 p-3 bg-netsurit-light-coral/20 rounded-lg border border-netsurit-coral/30",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-professional-gray-900",children:"Weekly Goal Benefits"}),e.jsx("p",{className:"text-xs text-professional-gray-600 mt-1",children:"Track completion each week to build your consistency streak"})]})}),T?.coachManaged&&T?.type==="consistency"&&e.jsx("div",{className:"flex items-start space-x-3 p-3 bg-netsurit-warm-orange/20 rounded-lg border border-netsurit-orange/30",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-professional-gray-900",children:"â­ Linked to Coach Milestone"}),e.jsxs("p",{className:"text-xs text-professional-gray-600 mt-1",children:['Your weekly completions will count toward the "',T.text,'" milestone']})]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{S(!1),D(null),M(null)},className:"flex-1 px-4 py-2 border border-professional-gray-300 text-professional-gray-700 rounded-xl hover:bg-professional-gray-50 transition-all duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!x.title.trim(),className:"flex-1 bg-professional-gray-500 text-white px-4 py-2 rounded-xl hover:bg-professional-gray-600 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:G?"Save Changes":"Add Goal"})]})]})})]})})]})},fe=({milestones:r,newMilestone:a,setNewMilestone:n,onAddMilestone:m,onToggleMilestone:d,onDeleteMilestone:u,onAddGoalToMilestone:f,onEditGoal:j,dreamId:c,dreamProgress:p,weeklyGoals:t})=>{const g=r.filter(l=>l.completed).length,N=l=>t.filter(k=>k.milestoneId===l&&k.dreamId===c);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-professional-gray-900",children:"Milestones"}),e.jsxs("div",{className:"text-xs text-professional-gray-600",children:[g," of ",r.length," completed"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:l=>n(l.target.value),placeholder:"Add a new milestone...",className:"flex-1 px-3 py-2 border border-professional-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red transition-all duration-200 text-sm",onKeyPress:l=>l.key==="Enter"&&m(),"aria-label":"New milestone title"}),e.jsxs("button",{onClick:m,disabled:!a.trim(),className:"bg-professional-gray-500 text-white px-3 py-2 rounded-lg hover:bg-professional-gray-600 focus:outline-none focus:ring-2 focus:ring-professional-gray-400 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1.5 text-sm","aria-label":"Add milestone",children:[e.jsx(L,{className:"w-3.5 h-3.5","aria-hidden":"true"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",role:"list","aria-label":"Milestones",children:r.length===0?e.jsxs("div",{className:"text-center py-8",role:"status",children:[e.jsx(A,{className:"w-10 h-10 mx-auto mb-3 text-professional-gray-300","aria-hidden":"true"}),e.jsx("p",{className:"text-professional-gray-500 text-sm",children:"No milestones yet. Add your first milestone above!"})]}):r.map(l=>e.jsx("div",{role:"listitem",children:e.jsx(ue,{milestone:l,linkedGoals:N(l.id),onToggleMilestone:d,onAddGoalToMilestone:f,onEditGoal:j,dreamProgress:p})},l.id))})]})},ye=({notes:r,newNote:a,setNewNote:n,onAddNote:m,formatDate:d})=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-bold text-professional-gray-900",children:"Notes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:a,onChange:u=>n(u.target.value),placeholder:"Add a note about your progress, thoughts, or experiences...",className:"w-full h-24 px-3 py-2 border border-professional-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-netsurit-red focus:border-netsurit-red transition-all duration-200 resize-none text-sm"}),e.jsxs("button",{onClick:m,disabled:!a.trim(),className:"bg-gradient-to-r from-netsurit-red to-netsurit-coral text-white px-3 py-1.5 rounded-lg hover:from-netsurit-coral hover:to-netsurit-orange focus:outline-none focus:ring-2 focus:ring-netsurit-red transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1.5 text-sm",children:[e.jsx(L,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Add Note"})]})]}),e.jsx("div",{className:"space-y-2",children:r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"w-10 h-10 mx-auto mb-3 text-professional-gray-300"}),e.jsx("p",{className:"text-professional-gray-500 text-sm",children:"No notes yet. Add your first note above!"})]}):r.map(u=>e.jsx("div",{className:"bg-white border border-professional-gray-200 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-professional-gray-600",children:[e.jsx(F,{className:"w-3 h-3"}),e.jsx("span",{children:d(u.timestamp)})]})}),e.jsx("p",{className:"text-professional-gray-800 leading-relaxed whitespace-pre-wrap text-sm",children:u.text})]})},u.id))})]}),je=({coachNotes:r,formatDate:a})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-professional-gray-900",children:"Coach Notes"}),e.jsxs("span",{className:"text-xs text-professional-gray-600 bg-netsurit-light-coral/20 text-netsurit-red px-2 py-1 rounded-md font-medium",children:[r.length," insights"]})]}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(z,{className:"w-10 h-10 mx-auto mb-3 text-professional-gray-300"}),e.jsx("p",{className:"text-professional-gray-500 text-sm",children:"No coaching notes yet."}),e.jsx("p",{className:"text-xs mt-2 text-professional-gray-500",children:"Your coach will add insights and feedback here to help guide your progress."})]}):e.jsx("div",{className:"space-y-2",children:r.map(n=>e.jsx("div",{className:"bg-white border border-professional-gray-200 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4 text-netsurit-red"}),e.jsx("span",{className:"text-xs font-medium text-professional-gray-800 capitalize",children:n.type?.replace("_"," ")||"Coach Note"})]}),e.jsx("span",{className:"text-xs text-netsurit-red font-medium",children:n.coachName||"Your Coach"})]}),e.jsx("p",{className:"text-professional-gray-800 leading-relaxed mb-2 text-sm",children:n.note||n.text}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-netsurit-red font-medium",children:a(n.createdAt||n.timestamp)}),n.type&&e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${n.type==="encouragement"?"bg-professional-gray-100 text-professional-gray-700":n.type==="suggestion"?"bg-netsurit-light-coral/20 text-netsurit-red":n.type==="concern"?"bg-netsurit-warm-orange/20 text-netsurit-orange":n.type==="milestone"?"bg-netsurit-coral/20 text-netsurit-coral":"bg-professional-gray-100 text-professional-gray-700"}`,children:n.type.replace("_"," ")})]})]})},n.id))})]}),be=({history:r,formatDate:a})=>{const n=d=>{switch(d){case"progress":return e.jsx(Y,{className:"w-3 h-3"});case"milestone":return e.jsx(A,{className:"w-3 h-3"});case"note":return e.jsx(V,{className:"w-3 h-3"});default:return e.jsx(E,{className:"w-3 h-3"})}},m=d=>{switch(d){case"progress":return"text-netsurit-red bg-netsurit-light-coral/20";case"milestone":return"text-netsurit-coral bg-netsurit-coral/20";case"note":return"text-netsurit-orange bg-netsurit-orange/20";default:return"text-professional-gray-600 bg-professional-gray-100"}};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-bold text-professional-gray-900",children:"History"}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"w-10 h-10 mx-auto mb-3 text-professional-gray-300"}),e.jsx("p",{className:"text-professional-gray-500 text-sm",children:"No history yet. Your progress updates will appear here!"})]}):e.jsx("div",{className:"space-y-2",children:r.map((d,u)=>e.jsxs("div",{className:"flex items-start space-x-3 relative",children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${m(d.type)}`,children:n(d.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"bg-white border border-professional-gray-200 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-professional-gray-900 font-medium text-sm",children:d.action}),e.jsx("p",{className:"text-xs text-professional-gray-600 mt-1",children:a(d.timestamp)})]})})}),u<r.length-1&&e.jsx("div",{className:"absolute left-4 top-8 w-0.5 h-2 bg-professional-gray-200"})]},d.id))})]})};export{Ce as D};
