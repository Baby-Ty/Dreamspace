<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Demo Users to Production Cosmos DB</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-weight: 500;
        }
        .user-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .user-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #007bff;
            transition: all 0.3s ease;
        }
        .user-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,123,255,0.2);
        }
        .user-card.coach {
            border-left-color: #28a745;
            background: linear-gradient(135deg, #f8fff8, #e8f5e8);
        }
        .user-card h3 {
            margin: 0 0 15px 0;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .user-card .role {
            font-size: 0.9em;
            padding: 4px 8px;
            border-radius: 20px;
            font-weight: 600;
        }
        .role.coach {
            background: #28a745;
            color: white;
        }
        .role.employee {
            background: #007bff;
            color: white;
        }
        .user-details {
            font-size: 0.9em;
            color: #666;
            line-height: 1.6;
        }
        .status {
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            display: inline-block;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        .status.pending { 
            background: #fff3cd; 
            color: #856404; 
            border: 1px solid #ffeaa7;
        }
        .status.success { 
            background: #d4edda; 
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error { 
            background: #f8d7da; 
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .add-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40,167,69,0.3);
        }
        .add-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
            white-space: pre-wrap;
        }
        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            height: 6px;
            margin: 15px 0;
        }
        .progress-fill {
            background: linear-gradient(90deg, #28a745, #20c997);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }
        .emoji {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Add Demo Users to Production</h1>
        <p class="subtitle">Adding Sarah Johnson (Coach) and her 3 team members to the live Cosmos DB</p>
        
        <div class="warning">
            <strong>‚ö†Ô∏è Production Database Operation</strong><br>
            This will add 4 real users to your live Cosmos DB at dreamspace.tylerstewart.co.za. 
            These users will appear in all parts of the application alongside existing users.
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>
        
        <div class="user-grid">
            <div class="user-card coach">
                <h3>
                    <span class="emoji">üë©‚Äçüíº</span> 
                    Sarah Johnson 
                    <span class="role coach">COACH</span>
                </h3>
                <div class="user-details">
                    <strong>Email:</strong> sarah.johnson@netsurit.com<br>
                    <strong>Role:</strong> Senior Development Manager<br>
                    <strong>Office:</strong> Cape Town<br>
                    <strong>Team:</strong> 3 members (Mike, Jennifer, Alex)<br>
                    <strong>Dreams:</strong> Team Leadership, React Certification, Marathon
                </div>
                <div id="sarah-status" class="status pending">‚è≥ Pending</div>
            </div>

            <div class="user-card">
                <h3>
                    <span class="emoji">üë®‚Äçüíª</span> 
                    Mike Chen 
                    <span class="role employee">EMPLOYEE</span>
                </h3>
                <div class="user-details">
                    <strong>Email:</strong> mike.chen@netsurit.com<br>
                    <strong>Role:</strong> Frontend Developer<br>
                    <strong>Coach:</strong> Sarah Johnson<br>
                    <strong>Dreams:</strong> Master React/TypeScript, Senior Promotion
                </div>
                <div id="mike-status" class="status pending">‚è≥ Pending</div>
            </div>

            <div class="user-card">
                <h3>
                    <span class="emoji">üë©‚Äçüíª</span> 
                    Jennifer Smith 
                    <span class="role employee">EMPLOYEE</span>
                </h3>
                <div class="user-details">
                    <strong>Email:</strong> jennifer.smith@netsurit.com<br>
                    <strong>Role:</strong> Full Stack Developer<br>
                    <strong>Coach:</strong> Sarah Johnson<br>
                    <strong>Dreams:</strong> Become Tech Lead, Master Cloud Tech
                </div>
                <div id="jennifer-status" class="status pending">‚è≥ Pending</div>
            </div>

            <div class="user-card">
                <h3>
                    <span class="emoji">üë®‚Äçüíª</span> 
                    Alex Rodriguez 
                    <span class="role employee">EMPLOYEE</span>
                </h3>
                <div class="user-details">
                    <strong>Email:</strong> alex.rodriguez@netsurit.com<br>
                    <strong>Role:</strong> Junior Developer<br>
                    <strong>Coach:</strong> Sarah Johnson<br>
                    <strong>Dreams:</strong> Master JavaScript, Mid-Level Promotion
                </div>
                <div id="alex-status" class="status pending">‚è≥ Pending</div>
            </div>
        </div>

        <button id="add-btn" class="add-btn" onclick="addProductionUsers()">
            <span class="emoji">üéØ</span> Add All 4 Users to Production Cosmos DB
        </button>

        <div class="log" id="log"></div>
    </div>

    <script>
        const log = document.getElementById('log');
        const progressBar = document.getElementById('progressBar');
        let progress = 0;

        function logMessage(message) {
            const timestamp = new Date().toLocaleTimeString();
            log.textContent += `[${timestamp}] ${message}\n`;
            log.scrollTop = log.scrollHeight;
        }

        function updateProgress(percent) {
            progressBar.style.width = percent + '%';
        }

        function updateStatus(userId, status, message = '') {
            const statusEl = document.getElementById(`${userId}-status`);
            if (statusEl) {
                statusEl.className = `status ${status}`;
                statusEl.textContent = status === 'success' ? '‚úÖ Added to DB' : 
                                      status === 'error' ? '‚ùå Failed' : '‚è≥ Pending';
            }
            if (message) {
                logMessage(`${userId}: ${message}`);
            }
        }

        async function saveUserToProduction(userData) {
            try {
                logMessage(`üîÑ Adding ${userData.name} to production Cosmos DB...`);
                
                // Use the live API endpoint
                const response = await fetch(`https://dreamspace.tylerstewart.co.za/api/saveUserData/${userData.userId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(userData)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `HTTP ${response.status}`);
                }

                const result = await response.json();
                logMessage(`‚úÖ Successfully added ${userData.name} to production database`);
                return { success: true, result };
            } catch (error) {
                logMessage(`‚ùå Error adding ${userData.name}: ${error.message}`);
                return { success: false, error: error.message };
            }
        }

        async function addProductionUsers() {
            const button = document.getElementById('add-btn');
            button.disabled = true;
            button.innerHTML = '<span class="emoji">üîÑ</span> Adding Users to Production...';
            
            logMessage('üöÄ Starting production user creation...');
            logMessage('üåê Target: dreamspace.tylerstewart.co.za Cosmos DB');

            // Production user data - complete profiles
            const productionUsers = [
                {
                    id: "sarah.johnson@netsurit.com",
                    userId: "sarah.johnson@netsurit.com", 
                    name: "Sarah Johnson",
                    email: "sarah.johnson@netsurit.com",
                    office: "Cape Town",
                    avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face&auto=format&q=80",
                    jobTitle: "Senior Development Manager",
                    department: "Engineering",
                    role: "coach",
                    dreamCategories: ["Learning", "Career", "Health", "Leadership"],
                    dreamBook: [
                        {
                            id: 1,
                            title: "Master Team Leadership",
                            category: "Career",
                            description: "Develop advanced leadership skills to effectively manage and inspire development teams across multiple projects.",
                            progress: 75,
                            image: "https://images.unsplash.com/photo-1552664730-d307ca884978?w=600&q=60&auto=format&fit=crop",
                            milestones: [
                                { id: 1, text: "Complete leadership training program", completed: true, createdAt: "2024-01-05T10:00:00Z" },
                                { id: 2, text: "Implement weekly 1:1s with all team members", completed: true, createdAt: "2024-01-15T10:00:00Z" },
                                { id: 3, text: "Launch team mentorship program", completed: false, createdAt: "2024-02-01T10:00:00Z" }
                            ],
                            notes: [
                                { id: 1, text: "Started implementing new team structure with clear roles and responsibilities.", timestamp: "2024-01-06T12:00:00Z" },
                                { id: 2, text: "Team feedback has been very positive on the new 1:1 format.", timestamp: "2024-01-20T14:30:00Z" }
                            ],
                            history: [
                                { id: 1, type: "progress", action: "Progress updated to 75%", timestamp: "2024-01-20T09:00:00Z", oldValue: 60, newValue: 75 }
                            ]
                        },
                        {
                            id: 2,
                            title: "Complete Advanced React Certification",
                            category: "Learning",
                            description: "Stay current with the latest React patterns and advanced techniques to guide team development.",
                            progress: 45,
                            image: "https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=600&q=60&auto=format&fit=crop",
                            milestones: [
                                { id: 1, text: "Complete React 18 new features course", completed: true, createdAt: "2024-01-05T10:00:00Z" },
                                { id: 2, text: "Build demo project with Next.js 14", completed: false, createdAt: "2024-01-15T10:00:00Z" }
                            ],
                            notes: [
                                { id: 1, text: "React 18 concurrent features are game-changing for performance.", timestamp: "2024-01-10T11:00:00Z" }
                            ],
                            history: [
                                { id: 1, type: "milestone", action: "Completed milestone: React 18 course", timestamp: "2024-01-10T11:05:00Z" }
                            ]
                        },
                        {
                            id: 3,
                            title: "Run Cape Town Marathon",
                            category: "Health",
                            description: "Train for and complete the Cape Town Marathon to maintain physical and mental health.",
                            progress: 30,
                            image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=600&q=60&auto=format&fit=crop",
                            milestones: [
                                { id: 1, text: "Create 16-week training plan", completed: true, createdAt: "2024-01-05T10:00:00Z" },
                                { id: 2, text: "Complete first 10K training run", completed: true, createdAt: "2024-01-15T10:00:00Z" }
                            ],
                            notes: [
                                { id: 1, text: "Training is going well, running 3x per week consistently.", timestamp: "2024-01-20T07:00:00Z" }
                            ],
                            history: [
                                { id: 1, type: "progress", action: "Progress updated to 30%", timestamp: "2024-01-20T07:05:00Z", oldValue: 15, newValue: 30 }
                            ]
                        }
                    ],
                    careerGoals: [
                        {
                            id: 1,
                            title: "Lead Digital Transformation Initiative",
                            description: "Spearhead the company's digital transformation, modernizing legacy systems",
                            progress: 85,
                            targetDate: "2024-06-30",
                            status: "In Progress"
                        }
                    ],
                    score: 142,
                    dreamsCount: 3,
                    connectsCount: 8,
                    lastUpdated: new Date().toISOString()
                },
                {
                    id: "mike.chen@netsurit.com",
                    userId: "mike.chen@netsurit.com",
                    name: "Mike Chen",
                    email: "mike.chen@netsurit.com",
                    office: "Cape Town",
                    avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face&auto=format&q=80",
                    jobTitle: "Frontend Developer",
                    department: "Engineering",
                    role: "employee",
                    coachId: "sarah.johnson@netsurit.com",
                    dreamCategories: ["Learning", "Career", "Technology"],
                    dreamBook: [
                        {
                            id: 1,
                            title: "Master React and TypeScript",
                            category: "Learning",
                            description: "Become proficient in React 18 features and advanced TypeScript patterns.",
                            progress: 65,
                            image: "https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=600&q=60&auto=format&fit=crop",
                            milestones: [
                                { id: 1, text: "Complete React Hooks mastery", completed: true, createdAt: "2024-01-05T10:00:00Z" },
                                { id: 2, text: "Learn TypeScript generics", completed: true, createdAt: "2024-01-15T10:00:00Z" }
                            ],
                            notes: [
                                { id: 1, text: "React Suspense and concurrent features are fascinating!", timestamp: "2024-01-10T14:00:00Z" }
                            ],
                            history: [
                                { id: 1, type: "progress", action: "Progress updated to 65%", timestamp: "2024-01-16T09:00:00Z", oldValue: 50, newValue: 65 }
                            ]
                        }
                    ],
                    score: 89,
                    dreamsCount: 2,
                    connectsCount: 4,
                    lastUpdated: new Date().toISOString()
                },
                {
                    id: "jennifer.smith@netsurit.com",
                    userId: "jennifer.smith@netsurit.com",
                    name: "Jennifer Smith", 
                    email: "jennifer.smith@netsurit.com",
                    office: "Cape Town",
                    avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face&auto=format&q=80",
                    jobTitle: "Full Stack Developer",
                    department: "Engineering", 
                    role: "employee",
                    coachId: "sarah.johnson@netsurit.com",
                    dreamCategories: ["Career", "Learning", "Leadership"],
                    dreamBook: [
                        {
                            id: 1,
                            title: "Become a Tech Lead",
                            category: "Career",
                            description: "Develop the technical and people skills necessary to lead engineering projects.",
                            progress: 55,
                            image: "https://images.unsplash.com/photo-1556761175-b413da4baf72?w=600&q=60&auto=format&fit=crop",
                            milestones: [
                                { id: 1, text: "Complete technical architecture course", completed: true, createdAt: "2024-01-05T10:00:00Z" }
                            ],
                            notes: [
                                { id: 1, text: "Architecture course gave me great insights into system design.", timestamp: "2024-01-12T15:00:00Z" }
                            ],
                            history: [
                                { id: 1, type: "progress", action: "Progress updated to 55%", timestamp: "2024-01-18T09:00:00Z", oldValue: 40, newValue: 55 }
                            ]
                        }
                    ],
                    score: 98,
                    dreamsCount: 2,
                    connectsCount: 3,
                    lastUpdated: new Date().toISOString()
                },
                {
                    id: "alex.rodriguez@netsurit.com",
                    userId: "alex.rodriguez@netsurit.com",
                    name: "Alex Rodriguez",
                    email: "alex.rodriguez@netsurit.com", 
                    office: "Cape Town",
                    avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face&auto=format&q=80",
                    jobTitle: "Junior Developer",
                    department: "Engineering",
                    role: "employee", 
                    coachId: "sarah.johnson@netsurit.com",
                    dreamCategories: ["Learning", "Career", "Skills"],
                    dreamBook: [
                        {
                            id: 1,
                            title: "Master JavaScript Fundamentals",
                            category: "Learning",
                            description: "Build a strong foundation in JavaScript, ES6+, and modern development practices.",
                            progress: 70,
                            image: "https://images.unsplash.com/photo-1579468118864-1b9ea3c0db4a?w=600&q=60&auto=format&fit=crop",
                            milestones: [
                                { id: 1, text: "Complete JavaScript course", completed: true, createdAt: "2024-01-05T10:00:00Z" },
                                { id: 2, text: "Build 3 portfolio projects", completed: true, createdAt: "2024-01-18T10:00:00Z" }
                            ],
                            notes: [
                                { id: 1, text: "Async/await patterns finally clicked for me!", timestamp: "2024-01-12T16:00:00Z" }
                            ],
                            history: [
                                { id: 1, type: "progress", action: "Progress updated to 70%", timestamp: "2024-01-19T09:00:00Z", oldValue: 55, newValue: 70 }
                            ]
                        }
                    ],
                    score: 67,
                    dreamsCount: 2,
                    connectsCount: 2,
                    lastUpdated: new Date().toISOString()
                }
            ];

            // Create users one by one
            const userNames = ['sarah', 'mike', 'jennifer', 'alex'];
            let successCount = 0;
            
            for (let i = 0; i < productionUsers.length; i++) {
                const user = productionUsers[i];
                const userName = userNames[i];
                
                updateProgress(((i) / productionUsers.length) * 100);
                
                const result = await saveUserToProduction(user);
                
                if (result.success) {
                    updateStatus(userName, 'success', `‚úÖ Added to production database`);
                    successCount++;
                } else {
                    updateStatus(userName, 'error', `‚ùå Failed: ${result.error}`);
                }
                
                // Small delay between requests
                await new Promise(resolve => setTimeout(resolve, 1000));
            }

            updateProgress(100);
            
            logMessage(`\nüéâ Production setup completed!`);
            logMessage(`üìä Results: ${successCount}/${productionUsers.length} users added successfully`);
            
            if (successCount === productionUsers.length) {
                logMessage(`\n‚úÖ All demo users are now live in production!`);
                logMessage(`üåê Visit https://dreamspace.tylerstewart.co.za`);
                logMessage(`üë§ Demo login should now work with Sarah Johnson's account`);
                button.innerHTML = '<span class="emoji">üéâ</span> All Users Added Successfully!';
                button.style.background = 'linear-gradient(135deg, #28a745, #20c997)';
            } else {
                logMessage(`\n‚ö†Ô∏è Some users failed to be added. Check the logs above.`);
                button.innerHTML = '<span class="emoji">‚ö†Ô∏è</span> Partial Success - Check Logs';
                button.style.background = 'linear-gradient(135deg, #ffc107, #fd7e14)';
            }
            
            button.disabled = false;
        }
    </script>
</body>
</html>
